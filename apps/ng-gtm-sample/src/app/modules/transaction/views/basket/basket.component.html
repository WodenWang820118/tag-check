@let items = basketItems$();
@if (!items?.length) {
  <div class="max-w-4xl mx-auto p-6">
    <p-message severity="info" text="There are no items in your basket."></p-message>
  </div>
} @else {
  @let width = (windowSizeService.width$());
  @if (width > 480) {
  <p-table [value]="items || []" [responsiveLayout]="'scroll'" class="p-datatable-striped">
      <ng-template pTemplate="header">
        <tr>
          <th scope="col">Image</th>
          <th scope="col">Destination</th>
          <th scope="col">Travelers</th>
          <th scope="col">Total Price</th>
          <th scope="col">Action</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item>
        <tr>
          <td><img [src]="item.image" alt="{{item.title}}" style="width:50px"/></td>
          <td>{{ item.title }}</td>
          <td>{{ item.quantity }}</td>
          <td>{{ item.value | currency }}</td>
          <td>
            <button pButton pRipple icon="pi pi-pencil" class="p-button-text p-button-sm" (click)="updateCart(item.id)"></button>
            <button pButton pRipple icon="pi pi-trash" class="p-button-text p-button-danger p-button-sm" (click)="removeFromCart(item)"></button>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="footer">
        <tr>
          <td colspan="3" class="p-text-center">
            Total: {{ calculateTotalPrice()() | currency }}
          </td>
          <td colspan="2" class="p-text-center">
            <button pButton label="Checkout" icon="pi pi-check" class="p-button-success" (click)="beginCheckout(); navigateToBeginCheckout()"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  } @else {
  <p-dataView [value]="items || []" [layout]="'grid'" class="p-mt-3">
      <ng-template pTemplate="item" let-item>
        <p-card>
          <ng-template pTemplate="header">
            <img [src]="item.image" alt="{{ item.title }}" style="width:100%"/>
          </ng-template>
          <div class="p-card-body">
            <h5>{{ item.title }}</h5>
            <p>Travelers: {{ item.quantity }}</p>
            <p>Total Price: {{ item.value | currency }}</p>
            <button pButton label="Edit" icon="pi pi-pencil" class="p-button-sm p-mr-2" (click)="updateCart(item.id)"></button>
            <button pButton label="Delete" icon="pi pi-trash" class="p-button-sm p-button-danger" (click)="removeFromCart(item)"></button>
          </div>
        </p-card>
      </ng-template>
      <ng-template pTemplate="header">
      <div class="text-right mb-2">
        <button pButton label="Proceed to Checkout" icon="pi pi-check" class="p-button-success" (click)="beginCheckout(); navigateToBeginCheckout()"></button>
      </div>
      </ng-template>
    </p-dataView>
  }
}
